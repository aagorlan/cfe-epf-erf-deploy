# Автоматизация деплоя (загрузка новых, удаление старых) внешних файлов конфигурации 1С

## Общие параметры:

- --ibconnection - Строка подключения к БД (/FfilePath или /SserverPath)
       Например, для файловых баз --ibconnection /FC:\base1 или --ibconnection /F./base1 или --ibconnection /Fbase1
       Или для серверных баз --ibconnection /S"servername\basename"
       При отсуствии проверяется установка глобальной переменной RUNNER_IBCONNECTION
- --db-user - Пользователь БД c правами администратора
       При отсуствии проверяется установка глобальной переменной RUNNER_DBUSER
- --db-pwd - Пароль БД
       При отсуствии проверяется установка глобальной переменной RUNNER_DBPWD
- --v8version - Версия платформы
       При отсуствии проверяется установка глобальной переменной RUNNER_v8version или RUNNER_V8VERSION
- --bitness - Разрядность платформы 1С. Варианты: x64,x86,x64x86,x86x64
       При отсуствии проверяется установка глобальной переменной RUNNER_uccode или RUNNER_UCCODE

## Автоматизируемые функции

### Загрузка всех расширений из папки с исходниками расширений

```bash
cedeploy loadcfe --src <Путь к папке с расширениями>
```

## Дополнительные обработки

> Для запуска обработок необходимо входить в базу под пользователем со снятой установкой "Защита от опасных действий"

### Обработка расширений (ОбновлениеСостоянияРасширений.epf) базы данных для каждого расширения в базе данных выполняется алгоритм

1. Если расширение обнаружено в папке расширений, для расширения устанавливается признак "Активно";
2. Если расширение не обнаружено в папке расширений, но признак "Активно" установлен, снимается признак "Активно";
3. Если расширение не обнаружено в папке расширений, и признак "Активно" не установлен, расширение удаляется из базы.

## Установка

Клонируем репозиторий

```bash
git clone https://github.com/aagorlan/cfe-epf-erf-deploy.git
```

Переходим в папку проекта

```bash
сd cfe-epf-erf-deploy
```

Компилируем приложение

```bash
opm build
```

Устанавливаем приложение

```bash
opm install -f *.ospx
```
